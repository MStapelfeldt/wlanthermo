template:
# Pitmaster 1
  - sensor:
      - name: Pitmaster 1 all
        unique_id: pitmaster_1_all
        unit_of_measurement: "%"
        state_class: measurement
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
          {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['value'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set pmTyp = state_attr('sensor.pitmaster_1_all', 'type') %}
          {% if pmTyp == 'off' %}
            mdi:fan-off
          {% else %}
            {% if pmTyp == 'manual' %}
              mdi:fan-plus
            {% else %}
              mdi:fan-auto
            {% endif %}
          {% endif %}
        attributes:
          friendly_name: Pitmaster 1
          mode_on: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').type }}
            {% else %}
            'off'
            {% endif %}
          channel: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['channel'] }}
            {% else %}
            0
            {% endif %}
          pid: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['pid'] }}
            {% else %}
            0
            {% endif %}
          set: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['set'] }}
            {% else %}
            0
            {% endif %}
          type: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['typ'] }}
            {% else %}
            0
            {% endif %}
          set_color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['set_color'] }}
            {% else %}
            0
            {% endif %}
          value_color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'pitmaster').pm[0]['value_color'] }}
            {% else %}
            0
            {% endif %}

  # Channel 1
  - sensor:
      - name: wlanthermo channel 1 all
        unique_id: wlanthermo_channel_1_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[0]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[0]['name'] }}
            {% else %}
            Kanal 1
            {% endif %}
          friendly_name: "{{ '#1 ' ~ state_attr('sensor.wlanthermo_channel_1_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[0]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[0]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[0]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[0]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[0]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[0]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[0]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_1_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 2
  - sensor:
      - name: wlanthermo_channel_2_all
        unique_id: wlanthermo_channel_2_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
#        availability: >
#          {{ not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and state_attr('sensor.bbq_thermo', 'channel')[1]['temp'] < 999 }}
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[1]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[1]['name'] }}
            {% else %}
            Kanal 2
            {% endif %}
          friendly_name: "{{ '#2 ' ~ state_attr('sensor.wlanthermo_channel_2_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[1]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[1]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[1]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[1]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[1]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[1]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[1]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_2_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 3
  - sensor:
      - name: wlanthermo_channel_3_all
        unique_id: wlanthermo_channel_3_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[2]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[2]['name'] }}
            {% else %}
            Kanal 3
            {% endif %}
          friendly_name: "{{ '#3 ' ~ state_attr('sensor.wlanthermo_channel_3_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[2]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[2]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[2]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[2]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[2]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[2]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[2]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[2]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_3_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 4
  - sensor:
      - name: wlanthermo_channel_4_all
        unique_id: wlanthermo_channel_4_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[3]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[3]['name'] }}
            {% else %}
            Kanal 4
            {% endif %}
          friendly_name: "{{ '#4 ' ~ state_attr('sensor.wlanthermo_channel_4_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[3]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[3]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[3]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[3]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[3]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[3]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[3]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[3]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_4_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 5
  - sensor:
      - name: wlanthermo_channel_5_all
        unique_id: wlanthermo_channel_5_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[4]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[4]['name'] }}
            {% else %}
            Kanal 4
            {% endif %}
          friendly_name: "{{ '#4 ' ~ state_attr('sensor.wlanthermo_channel_5_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[4]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[4]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[4]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[4]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[4]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[4]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[4]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[4]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_5_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 6
  - sensor:
      - name: wlanthermo_channel_6_all
        unique_id: wlanthermo_channel_6_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[5]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[5]['name'] }}
            {% else %}
            Kanal 4
            {% endif %}
          friendly_name: "{{ '#4 ' ~ state_attr('sensor.wlanthermo_channel_6_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[5]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[5]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[5]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[5]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[5]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[5]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[5]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[5]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_6_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 7
  - sensor:
      - name: wlanthermo channel 7 all
        unique_id: wlanthermo_channel_7_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[6]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[6]['name'] }}
            {% else %}
            Kanal 7
            {% endif %}
          friendly_name: "{{ '#1 ' ~ state_attr('sensor.wlanthermo_channel_1_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[6]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[6]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[6]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[6]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[6]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[6]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[6]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[6]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_1_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}

  # Channel 8
  - sensor:
      - name: wlanthermo_channel_8_all
        unique_id: wlanthermo_channel_8_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[7]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[7]['name'] }}
            {% else %}
            Kanal 8
            {% endif %}
          friendly_name: "{{ '#1 ' ~ state_attr('sensor.wlanthermo_channel_1_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[7]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[7]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[7]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[7]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[7]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[7]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[7]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[7]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_1_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}
          
  # Channel 9
  - sensor:
      - name: wlanthermo_channel_9_all
        unique_id: wlanthermo_channel_9_all
        unit_of_measurement: "°C"
        state_class: measurement
        device_class: temperature
        attributes:
          alarm: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[8]['alarm'] }}
            {% else %}
            0
            {% endif %}
          name: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[8]['name'] }}
            {% else %}
            Kanal 8
            {% endif %}
          friendly_name: "{{ '#1 ' ~ state_attr('sensor.wlanthermo_channel_1_all', 'name') }}"
          color: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[8]['color'] }}
            {% else %}
            0
            {% endif %}
          max: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[8]['max'] }}
            {% else %}
            0
            {% endif %}
          min: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {{ state_attr('sensor.bbq_thermo', 'channel')[8]['min'] }}
            {% else %}
            0
            {% endif %}
          inRange: >
            {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) %}
            {% set temp = state_attr('sensor.bbq_thermo', 'channel')[8]['temp'] %}
            {% if temp > state_attr('sensor.bbq_thermo', 'channel')[8]['max'] %}
            1
            {% else %}
            {% if temp < state_attr('sensor.bbq_thermo', 'channel')[8]['min'] %}
            -1
            {% else %}
            0
            {% endif %}
            {% endif %}
            {% else %}
            0
            {% endif %}
        state: >
          {% if not is_state('sensor.bbq_thermo', 'unavailable') and (not is_state('sensor.bbq_thermo', 'unknown')) and (state_attr('sensor.bbq_thermo', 'channel')[8]['temp'] < 500) %}
          {{ state_attr('sensor.bbq_thermo', 'channel')[8]['temp'] }}
          {% else %}
          0
          {% endif %}
        icon: >
          {% set inRange = state_attr('sensor.wlanthermo_channel_1_all', 'inRange') | int(0) %}
          {% if inRange > 0 %}
          mdi:fire-alert
          {% else %}
          {% if inRange < 0 %}
          mdi:snowflake-alert
          {% else %}
          mdi:thermometer
          {% endif %}
          {% endif %}
